# Using pre-built Angular application for ultra-fast builds
FROM alpine:3.20
RUN apk add --no-cache nginx && \
    addgroup -g 1001 -S nodejs && \
    adduser -S angular -u 1001 -G nodejs && \
    mkdir -p /var/log/nginx /var/lib/nginx /run/nginx && \
    chown -R angular:nodejs /var/log/nginx /var/lib/nginx /run/nginx /etc/nginx

COPY ./nginx.conf /etc/nginx/nginx.conf
COPY dist/angular /var/www/html/
RUN chown -R angular:nodejs /var/www/html

USER angular
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]